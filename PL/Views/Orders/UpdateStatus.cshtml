@model PL.ViewModels.Orders.OrderStatusUpdateViewModel

@{
    ViewData["Title"] = $"Update Status for Order #{Model.OrderId}";
}

<h1 class="mb-4">Update Status for Order <small class="text-muted">#@Model.OrderId</small></h1>

<div class="card shadow-sm">
    <div class="card-header bg-primary text-white">
        Change Order Status
    </div>
    <div class="card-body">
        <dl class="row mb-3">
            <dt class="col-sm-4">Current Status:</dt>
            <dd class="col-sm-8">
                <span class="badge @(Model.CurrentStatus == DAL.Models.OrderStatus.Pending ? "bg-secondary" :
                                     Model.CurrentStatus == DAL.Models.OrderStatus.Preparing ? "bg-info text-dark" :
                                     Model.CurrentStatus == DAL.Models.OrderStatus.Ready ? "bg-success" :
                                     Model.CurrentStatus == DAL.Models.OrderStatus.Delivered ? "bg-primary" : "bg-danger")">
                    @Model.CurrentStatus
                </span>
            </dd>
        </dl>

        <form asp-action="UpdateStatus" asp-route-id="@Model.OrderId" method="post">
            <div asp-validation-summary="ModelOnly" class="text-danger mb-3"></div>
            @Html.AntiForgeryToken()
            <input type="hidden" asp-for="OrderId" />

            <div class="form-group mb-3">
                <label asp-for="NewStatus" class="form-label"></label>
                <select asp-for="NewStatus" class="form-control" asp-items="Model.AvailableStatuses"></select>
                <span asp-validation-for="NewStatus" class="text-danger"></span>
            </div>

            <div class="form-group mt-4">
                <button type="submit" class="btn btn-primary btn-lg"><i class="fas fa-save"></i> Update Status</button>
                <a asp-action="Details" asp-route-id="@Model.OrderId" class="btn btn-secondary btn-lg ms-2"><i class="fas fa-arrow-left"></i> Back to Order</a>
            </div>
        </form>
    </div>
</div>

@section Scripts {
    @{
        await Html.RenderPartialAsync("_ValidationScriptsPartial");
    }
    <script src="https://kit.fontawesome.com/your-font-awesome-kit.js" crossorigin="anonymous"></script> @* استبدل بـ Font Awesome CDN أو ملفك المحلي *@
}